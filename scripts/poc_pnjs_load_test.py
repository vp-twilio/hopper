import csv
import random
from locust import HttpUser, task, between


def load_test_data(file_path):
    test_data = []
    with open(file_path, mode="r") as file:
        reader = csv.reader(file)
        next(reader)  # Skip header if present
        for row in reader:
            friendlyName, actor, dids = row[0], row[1], eval(row[2])
            test_data.append({"friendlyName": friendlyName, "actor": actor, "dids": dids})
    return test_data


def load_test_data_fromjson():
    test_data = [{"friendlyName":"loadTestJob1","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob2","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob3","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob4","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob5","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob6","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob7","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob8","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]},{"friendlyName":"loadTestJob9","actor":"test-actor","dids":["+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051","+13051713051"]}]
    return test_data


class PhoneNumbersJobServiceUser(HttpUser):
    wait_time = between(0.5, 2)  # Adjust as needed

    def on_start(self):
        # Load data from CSV file
        #self.test_data = load_test_data("job_load_data.csv")
        # Loading data from variable / json.
        self.test_data = load_test_data_fromjson()

    @task
    def create_test_capabilities(self):
        job_id = "062BCC2C-3C18-4ECD-994D-53BC725B9D9E"
        test_payload = random.choice(self.test_data)
        payload = {
            "jobId": job_id,
            "actor": test_payload["actor"],
            "friendlyName": test_payload["friendlyName"],
            "notifyEmail": "",
            "dids": test_payload["dids"],
            "status": "1",
            "actions": ["setStatus"]
        }
        with self.client.post(
            "/v1/jobs/"+job_id+"/job-instances",  # base url : http://phone-numbers-job-service.mesh.twilioinfra.com:80
            json=payload,
            headers={"Content-Type": "application/json"},
            catch_response=True
        ) as response:
            if response.status_code == 201:
                response.success()
            else:
                response.failure(f"Failed with status {response.status_code}")

    @task
    def create_change_configuration(self):
        job_id = "2C6CFF06-A508-4FE8-9F58-5B519580EE1A"
        nkuSid = "NK973aaa2bfba0b53d9e85ed7d94052272"
        test_payload = random.choice(self.test_data)
        payload = {
            "jobId": job_id,
            "actor": test_payload["actor"],
            "friendlyName": test_payload["friendlyName"],
            "notifyEmail": "",
            "changeNkuSidTo": nkuSid,
            "dids": test_payload["dids"],
            "actions": ["changeNku"]
        }
        with self.client.post(
            "/v1/jobs/"+job_id+"/job-instances",  # base url : http://phone-numbers-job-service.mesh.twilioinfra.com:80
            json=payload,
            headers={"Content-Type": "application/json"},
            catch_response=True
        ) as response:
            if response.status_code == 201:
                response.success()
            else:
                response.failure(f"Failed with status {response.status_code}")